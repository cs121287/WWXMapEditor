<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <!--
      Fallback theme brushes (design-time safe).
      If your app already defines these in Application.Resources, the designer for isolated views
      might still not load them; providing local fallbacks prevents XDG0010.
      Colors chosen to be close to your existing dark theme; adjust if needed.
    -->
    <SolidColorBrush x:Key="AccentBrush" Color="#FF9EE37D"/>
    <SolidColorBrush x:Key="Surface2Brush" Color="#FF2A2E35"/>
    <SolidColorBrush x:Key="Surface3Brush" Color="#FF1F2329"/>
    <SolidColorBrush x:Key="BorderBrush" Color="#FF3A3F46"/>
    <SolidColorBrush x:Key="ForegroundBrush" Color="#FFFFFFFF"/>
    <SolidColorBrush x:Key="ForegroundSecondaryBrush" Color="#FFA0ADB9"/>
    <SolidColorBrush x:Key="BackgroundBrush" Color="#FF0F1114"/>

    <!-- Country swatch brushes -->
    <SolidColorBrush x:Key="CountryRedoniaBrush" Color="#FFCF4B4B"/>
    <SolidColorBrush x:Key="CountrySevariaBrush" Color="#FF3B9ACE"/>
    <SolidColorBrush x:Key="CountryAuriaBrush" Color="#FFE5C07B"/>
    <SolidColorBrush x:Key="CountryMaritainBrush" Color="#FF3B70CE"/>
    <SolidColorBrush x:Key="CountryNorvosBrush" Color="#FFDB8A4A"/>
    <SolidColorBrush x:Key="CountryValtroBrush" Color="#FF7B3BE5"/>

    <!-- Shadow color used by DropShadowEffect -->
    <Color x:Key="ShadowColor">#FF000000</Color>

    <!-- Section header styles -->
    <Style x:Key="SectionKicker" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource AccentBrush}"/>
        <Setter Property="FontFamily" Value="Consolas"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="Opacity" Value="0.95"/>
    </Style>

    <Style x:Key="SectionSub" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource ForegroundSecondaryBrush}"/>
        <Setter Property="FontFamily" Value="Consolas"/>
        <Setter Property="Opacity" Value="0.9"/>
        <Setter Property="TextWrapping" Value="Wrap"/>
    </Style>

    <!-- Card style -->
    <Style x:Key="CardBorderStyle" TargetType="Border">
        <Setter Property="Background" Value="{DynamicResource Surface3Brush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource BorderBrush}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="CornerRadius" Value="10"/>
        <Setter Property="Padding" Value="20"/>
        <Setter Property="Margin" Value="0,0,0,15"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="Effect">
            <Setter.Value>
                <DropShadowEffect Color="{DynamicResource ShadowColor}" Direction="270" ShadowDepth="3" Opacity="0.22" BlurRadius="10"/>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Player header -->
    <Style x:Key="PlayerHeader" TargetType="TextBlock">
        <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}"/>
        <Setter Property="FontFamily" Value="Consolas"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="Margin" Value="0,0,0,8"/>
    </Style>

    <!-- Constants -->
    <sys:Int32 x:Key="Players2">2</sys:Int32>
    <sys:Int32 x:Key="Players3">3</sys:Int32>
    <sys:Int32 x:Key="Players4">4</sys:Int32>

    <!-- Country list -->
    <x:Array x:Key="CountryOptions" Type="{x:Type sys:String}">
        <sys:String>Random</sys:String>
        <sys:String>Redonia</sys:String>
        <sys:String>Sevaria</sys:String>
        <sys:String>Auria</sys:String>
        <sys:String>Maritain</sys:String>
        <sys:String>Norvos</sys:String>
        <sys:String>Valtro</sys:String>
    </x:Array>

    <!-- Flag swatch mapping -->
    <Style x:Key="FlagSwatchFillStyle" TargetType="Border">
        <Setter Property="Background" Value="{x:Null}"/>
        <Style.Triggers>
            <DataTrigger Binding="{Binding}" Value="Redonia">
                <Setter Property="Background" Value="{DynamicResource CountryRedoniaBrush}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding}" Value="Sevaria">
                <Setter Property="Background" Value="{DynamicResource CountrySevariaBrush}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding}" Value="Auria">
                <Setter Property="Background" Value="{DynamicResource CountryAuriaBrush}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding}" Value="Maritain">
                <Setter Property="Background" Value="{DynamicResource CountryMaritainBrush}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding}" Value="Norvos">
                <Setter Property="Background" Value="{DynamicResource CountryNorvosBrush}"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding}" Value="Valtro">
                <Setter Property="Background" Value="{DynamicResource CountryValtroBrush}"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <!-- Country tile ListBoxItem template with animations and states -->
    <Style x:Key="CountryTileContainerBaseStyle" TargetType="ListBoxItem">
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="Padding" Value="0"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListBoxItem">
                    <Grid x:Name="RootTile" Width="150" Height="44" Margin="0,6,10,6" RenderTransformOrigin="0.5,0.5">
                        <Grid.RenderTransform>
                            <ScaleTransform x:Name="Scale" ScaleX="1" ScaleY="1"/>
                        </Grid.RenderTransform>

                        <Border x:Name="TileBg"
                                Background="{DynamicResource Surface2Brush}"
                                BorderBrush="{DynamicResource BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="8">
                            <Border.Effect>
                                <DropShadowEffect Color="{DynamicResource ShadowColor}" BlurRadius="6" ShadowDepth="1" Opacity="0.18"/>
                            </Border.Effect>
                        </Border>

                        <!-- Selected fill -->
                        <Border x:Name="SelFill"
                                CornerRadius="8"
                                Background="{DynamicResource AccentBrush}"
                                Opacity="0.18"/>

                        <Grid Margin="10,0,8,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <!-- Swatch -->
                            <Border Grid.Column="0"
                                    Width="16" Height="16" CornerRadius="3"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="1" Margin="0,0,8,0"
                                    Style="{StaticResource FlagSwatchFillStyle}"/>

                            <!-- Country name -->
                            <TextBlock Grid.Column="1"
                                       Text="{TemplateBinding Content}"
                                       VerticalAlignment="Center"
                                       FontFamily="Consolas"
                                       Foreground="{DynamicResource ForegroundBrush}"/>

                            <!-- Taken badge -->
                            <Border x:Name="TakenBadge"
                                    Grid.Column="2"
                                    Background="{DynamicResource Surface3Brush}"
                                    BorderBrush="{DynamicResource BorderBrush}"
                                    BorderThickness="1"
                                    CornerRadius="6"
                                    Padding="6,2"
                                    Visibility="Collapsed"
                                    VerticalAlignment="Center">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ”’" VerticalAlignment="Center" Opacity="0.9"/>
                                    <TextBlock FontFamily="Consolas"
                                               Foreground="{DynamicResource ForegroundSecondaryBrush}"
                                               VerticalAlignment="Center"
                                               Margin="4,0,0,0"
                                               Text="Taken"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Grid>

                    <ControlTemplate.Triggers>
                        <!-- Hover scale -->
                        <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="Scale" Storyboard.TargetProperty="ScaleX" To="1.03" Duration="0:0:0.10"/>
                                        <DoubleAnimation Storyboard.TargetName="Scale" Storyboard.TargetProperty="ScaleY" To="1.03" Duration="0:0:0.10"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="Scale" Storyboard.TargetProperty="ScaleX" To="1.0" Duration="0:0:0.10"/>
                                        <DoubleAnimation Storyboard.TargetName="Scale" Storyboard.TargetProperty="ScaleY" To="1.0" Duration="0:0:0.10"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.ExitActions>
                        </Trigger>

                        <!-- Selected state -->
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="SelFill" Property="Opacity" Value="0.22"/>
                            <Setter TargetName="TileBg" Property="BorderBrush" Value="{DynamicResource AccentBrush}"/>
                        </Trigger>

                        <!-- Disabled (taken by other) -->
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter TargetName="TakenBadge" Property="Visibility" Value="Visible"/>
                            <Setter TargetName="TileBg" Property="Opacity" Value="0.75"/>
                        </Trigger>

                        <!-- If item is Random, never show Taken badge -->
                        <Trigger Property="Content" Value="Random">
                            <Setter TargetName="TakenBadge" Property="Visibility" Value="Collapsed"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>